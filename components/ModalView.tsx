// components/ModalView.tsx
import React, { useState, useEffect, useRef, useContext, useCallback } from 'react';
import { View, Notification } from '../types';
import FeatureGuard from './FeatureGuard';
import { DataContext } from '../contexts/DataContext';
import { GoogleGenAI } from "@google/genai";

// Import all views
import DashboardView from './views/personal/DashboardView';
import TransactionsView from './views/personal/TransactionsView';
import SendMoneyView from './views/personal/SendMoneyView';
import BudgetsView from './views/personal/BudgetsView';
import InvestmentsView from './InvestmentsView';
import PortfolioExplorerView from './views/personal/PortfolioExplorerView';
import CryptoView from './views/personal/CryptoView';
import FinancialGoalsView from './views/personal/FinancialGoalsView';
import MarketplaceView from './views/personal/MarketplaceView';
import PersonalizationView from './views/personal/PersonalizationView';
import CardCustomizationView from './views/personal/CardCustomizationView';
import RewardsHubView from './views/personal/RewardsHubView';
import CreditHealthView from './views/personal/CreditHealthView';
import SecurityView from './views/personal/SecurityView';
import OpenBankingView from './views/personal/OpenBankingView';
import SettingsView from './views/personal/SettingsView';
import AIAdvisorView from './views/platform/AIAdvisorView';
import QuantumWeaverView from './views/platform/QuantumWeaverView';
import QuantumOracleView from './views/platform/QuantumOracleView';
import AIAdStudioView from './views/platform/AIAdStudioView';
import TheVisionView from './views/platform/TheVisionView';
import APIStatusView from './views/platform/APIStatusView';
import TheNexusView from './views/platform/TheNexusView';
import ConstitutionalArticleView from './views/platform/ConstitutionalArticleView';
import TheCharterView from './views/platform/TheCharterView';
import FractionalReserveView from './views/platform/FractionalReserveView';
import FinancialInstrumentForgeView from './views/platform/TheAssemblyView';
import CorporateDashboardView from './views/corporate/CorporateDashboardView';
import PaymentOrdersView from './views/corporate/PaymentOrdersView';
import CounterpartiesView from './views/corporate/CounterpartiesView';
import InvoicesView from './views/corporate/InvoicesView';
import ComplianceView from './views/corporate/ComplianceView';
import AnomalyDetectionView from './views/corporate/AnomalyDetectionView';
import PayrollView from './views/corporate/PayrollView';
import DemoBankSocialView from './views/platform/DemoBankSocialView';
import DemoBankERPView from './views/platform/DemoBankERPView';
import DemoBankCRMView from './views/platform/DemoBankCRMView';
import DemoBankAPIGatewayView from './views/platform/DemoBankAPIGatewayView';
import DemoBankGraphExplorerView from './views/platform/DemoBankGraphExplorerView';
import DemoBankDBQLView from './views/platform/DemoBankDBQLView';
import DemoBankCloudView from './views/platform/DemoBankCloudView';
import DemoBankIdentityView from './views/platform/DemoBankIdentityView';
import DemoBankStorageView from './views/platform/DemoBankStorageView';
import DemoBankComputerView from './views/platform/DemoBankComputerView';
import DemoBankAIPlatformView from './views/platform/DemoBankAIPlatformView';
import DemoBankMachineLearningView from './views/platform/DemoBankMachineLearningView';
import DemoBankDevOpsView from './views/platform/DemoBankDevOpsView';
import DemoBankSecurityCenterView from './views/platform/DemoBankSecurityCenterView';
import DemoBankComplianceHubView from './views/platform/DemoBankComplianceHubView';
import DemoBankAppMarketplaceView from './views/platform/DemoBankAppMarketplaceView';
import ConnectView from './views/platform/DemoBankConnectView';
import DemoBankEventsView from './views/platform/DemoBankEventsView';
import DemoBankLogicAppsView from './views/platform/DemoBankLogicAppsView';
import DemoBankFunctionsView from './views/platform/DemoBankFunctionsView';
import DemoBankDataFactoryView from './views/platform/DemoBankDataFactoryView';
import DemoBankAnalyticsView from './views/platform/DemoBankAnalyticsView';
import DemoBankBIView from './views/platform/DemoBankBIView';
import DemoBankIoTHubView from './views/platform/DemoBankIoTHubView';
import DemoBankMapsView from './views/platform/DemoBankMapsView';
import DemoBankCommunicationsView from './views/platform/DemoBankCommunicationsView';
import DemoBankCommerceView from './views/platform/DemoBankCommerceView';
import DemoBankTeamsView from './views/platform/DemoBankTeamsView';
import DemoBankCMSView from './views/platform/DemoBankCMSView';
import DemoBankLMSView from './views/platform/DemoBankLMSView';
import DemoBankHRISView from './views/platform/DemoBankHRISView';
import DemoBankProjectsView from './views/platform/DemoBankProjectsView';
import DemoBankLegalSuiteView from './views/platform/DemoBankLegalSuiteView';
import DemoBankSupplyChainView from './views/platform/DemoBankSupplyChainView';
import DemoBankPropTechView from './views/platform/DemoBankPropTechView';
import DemoBankGamingServicesView from './views/platform/DemoBankGamingServicesView';
import DemoBankBookingsView from './views/platform/DemoBankBookingsView';
import DemoBankCDPView from './views/platform/DemoBankCDPView';
import DemoBankQuantumServicesView from './views/platform/DemoBankQuantumServicesView';
import DemoBankBlockchainView from './views/platform/DemoBankBlockchainView';
import DemoBankGISView from './views/platform/DemoBankGISView';
import DemoBankRoboticsView from './views/platform/DemoBankRoboticsView';
import DemoBankSimulationsView from './views/platform/DemoBankSimulationsView';
import DemoBankVoiceServicesView from './views/platform/DemoBankVoiceServicesView';
import DemoBankSearchSuiteView from './views/platform/DemoBankSearchSuiteView';
import DemoBankDigitalTwinView from './views/platform/DemoBankDigitalTwinView';
import DemoBankWorkflowEngineView from './views/platform/DemoBankWorkflowEngineView';
import DemoBankObservabilityPlatformView from './views/platform/DemoBankObservabilityPlatformView';
import DemoBankFeatureManagementView from './views/platform/DemoBankFeatureManagementView';
import DemoBankExperimentationPlatformView from './views/platform/DemoBankExperimentationPlatformView';
import DemoBankLocalizationPlatformView from './views/platform/DemoBankLocalizationPlatformView';
import DemoBankFleetManagementView from './views/platform/DemoBankFleetManagementView';
import DemoBankKnowledgeBaseView from './views/platform/DemoBankKnowledgeBaseView';
import DemoBankMediaServicesView from './views/platform/DemoBankMediaServicesView';
import DemoBankEventGridView from './views/platform/DemoBankEventGridView';
import DemoBankApiManagementView from './views/platform/DemoBankApiManagementView';
import AccessControlsView from './views/megadashboard/security/AccessControlsView';
import RoleManagementView from './views/megadashboard/security/RoleManagementView';
import AuditLogsView from './views/megadashboard/security/AuditLogsView';
import FraudDetectionView from './views/megadashboard/security/FraudDetectionView';
import ThreatIntelligenceView from './views/megadashboard/security/ThreatIntelligenceView';
import CardManagementView from './views/megadashboard/finance/CardManagementView';
import LoanApplicationsView from './views/megadashboard/finance/LoanApplicationsView';
import MortgagesView from './views/megadashboard/finance/MortgagesView';
import InsuranceHubView from './views/megadashboard/finance/InsuranceHubView';
import TaxCenterView from './views/megadashboard/finance/TaxCenterView';
import PredictiveModelsView from './views/megadashboard/analytics/PredictiveModelsView';
import RiskScoringView from './views/megadashboard/analytics/RiskScoringView';
import SentimentAnalysisView from './views/megadashboard/analytics/SentimentAnalysisView';
import DataLakesView from './views/megadashboard/analytics/DataLakesView';
import DataCatalogView from './views/megadashboard/analytics/DataCatalogView';
import ClientOnboardingView from './views/megadashboard/userclient/ClientOnboardingView';
import KycAmlView from './views/megadashboard/userclient/KycAmlView';
import UserInsightsView from './views/megadashboard/userclient/UserInsightsView';
import FeedbackHubView from './views/megadashboard/userclient/FeedbackHubView';
import SupportDeskView from './views/megadashboard/userclient/SupportDeskView';
import SandboxView from './views/megadashboard/developer/SandboxView';
import SdkDownloadsView from './views/megadashboard/developer/SdkDownloadsView';
import WebhooksView from './views/megadashboard/developer/WebhooksView';
import CliToolsView from './views/megadashboard/developer/CliToolsView';
import ExtensionsView from './views/megadashboard/developer/ExtensionsView';
import ApiKeysView from './views/megadashboard/developer/ApiKeysView';
import ApiContractsView from './views/developer/ApiContractsView';
import PartnerHubView from './views/megadashboard/ecosystem/PartnerHubView';
import AffiliatesView from './views/megadashboard/ecosystem/AffiliatesView';
import IntegrationsMarketplaceView from './views/megadashboard/ecosystem/IntegrationsMarketplaceView';
import CrossBorderPaymentsView from './views/megadashboard/ecosystem/CrossBorderPaymentsView';
import MultiCurrencyView from './views/megadashboard/ecosystem/MultiCurrencyView';
import NftVaultView from './views/megadashboard/digitalassets/NftVaultView';
import TokenIssuanceView from './views/megadashboard/digitalassets/TokenIssuanceView';
import SmartContractsView from './views/megadashboard/digitalassets/SmartContractsView';
import DaoGovernanceView from './views/megadashboard/digitalassets/DaoGovernanceView';
import OnChainAnalyticsView from './views/megadashboard/digitalassets/OnChainAnalyticsView';
import SalesPipelineView from './views/megadashboard/business/SalesPipelineView';
import MarketingAutomationView from './views/megadashboard/business/MarketingAutomationView';
import GrowthInsightsView from './views/megadashboard/business/GrowthInsightsView';
import CompetitiveIntelligenceView from './views/megadashboard/business/CompetitiveIntelligenceView';
import BenchmarkingView from './views/megadashboard